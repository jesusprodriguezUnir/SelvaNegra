<!-- Previsión del tiempo y gastos al final de la página -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Día 13: PortAventura Park</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="weather-widget.css">
</head>
<body>
    <header>
        <h1>Día 13: PortAventura Park</h1>
        <p>Sábado 26 de julio de 2025</p>
    </header>
    <div class="container">
        <div class="content">
            <h2>Itinerario del Día</h2>
            <ol>
                <li><strong>Mañana (apertura, ~10:00 h):</strong> Dirígete directamente a la zona China para aprovechar Dragon Khan y Shambhala sin colas. ¡Es lo más aconsejado nada más abrir!<br>
                Después, ve a Mediterrània para subir a Furius Baco, la catapulta que alcanza 135 km/h en pocos segundos. Repite alguna de estas antes de que se llenen las colas.</li>
                <li><strong>Media mañana:</strong> Haz un recorrido panorámico en el Steam Train por Mediterrània para ubicarte en el parque sin esfuerzo. Aprovecha para tomar algún espectáculo o show: FiestAventura en el lago, o el espectáculo Templo del Fuego en la zona de México.</li>
                <li><strong>Mediodía:</strong> Almuerza en Far West, por ejemplo en la zona del barco antes de Furius Baco, donde tienen vistas al lago y a las atracciones.</li>
                <li><strong>Tarde:</strong> Sigue en Far West con Grand Canyon Rapids (rápidos en balsas) y Silver River Flume (troncos), ideales para refrescarse. Luego explora el área de México, subiendo al impresionante Hurakan Condor, la torre de caída libre de 100 m. Si aún hay energía, date otra vuelta por El Diablo – Tren de la Mina.</li>
                <li><strong>Noche:</strong> Revisa el horario en la app o plano impreso: desfile de personajes (≈23:30 h) y fuegos artificiales sobre Mediterrània (≈23:40 h). Despide el día con un paseo tranquilo por Mediterrània o una cena relajada en el hotel.</li>
            </ol>
            <h3>Mapa de PortAventura Park</h3>
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2992.282232747081!2d1.151593!3d41.087271!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a3f4e2f4e2f4e2%3A0x0!2zUG9ydEF2ZW50dXJhIFdvcmxk!5e0!3m2!1ses!2ses!4v1750000000001!5m2!1ses!2ses" width="100%" height="400" style="border:0; border-radius: 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <!-- Widget del tiempo PortAventura (puedes dejarlo o quitarlo si prefieres solo la previsión general al final) -->
            <!--
            <div id="weather-widget">
                <h3><i class="fas fa-cloud-sun"></i> El Tiempo en PortAventura</h3>
                <div class="weather-locations">
                    <div class="weather-location" id="weather-portaventura">
                        <h4><i class="fas fa-map-marker-alt"></i> PortAventura (Salou)</h4>
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i> Cargando datos del tiempo...
                        </div>
                    </div>
                </div>
                <div class="last-updated" id="last-updated"></div>
            </div>
            -->
            <style>
            .weather-widget {
                background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
                border-radius: 20px;
                padding: 2rem;
                margin: 2rem 0;
                color: white;
                box-shadow: 0 15px 35px rgba(116, 185, 255, 0.3);
            }
            .weather-widget h3 {
                text-align: center;
                margin-bottom: 1.5rem;
                font-size: 1.5rem;
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .weather-locations {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .weather-location {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 15px;
                padding: 1.5rem;
                text-align: center;
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .weather-location:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            }
            .weather-location h4 {
                font-size: 1.3rem;
                margin-bottom: 1rem;
                color: #fff;
            }
            .weather-main {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 1rem;
            }
            .weather-icon {
                font-size: 3rem;
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .weather-temp {
                font-size: 2.5rem;
                font-weight: 700;
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .weather-condition {
                font-size: 1.1rem;
                margin-bottom: 1rem;
                opacity: 0.9;
            }
            .weather-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 0.5rem;
                font-size: 0.9rem;
            }
            .weather-detail {
                background: rgba(255, 255, 255, 0.1);
                padding: 0.5rem;
                border-radius: 8px;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            .weather-detail i {
                opacity: 0.8;
            }
            .loading {
                text-align: center;
                padding: 2rem;
                opacity: 0.7;
            }
            .error {
                background: linear-gradient(135deg, #ff7675 0%, #d63031 100%);
                color: white;
                padding: 1rem;
                border-radius: 10px;
                text-align: center;
                margin: 1rem 0;
            }
            .last-updated {
                text-align: center;
                font-size: 0.8rem;
                opacity: 0.7;
                margin-top: 1rem;
            }
            @media (max-width: 768px) {
                .weather-locations {
                    grid-template-columns: 1fr;
                }
                .weather-main {
                    flex-direction: column;
                    gap: 0.5rem;
                }
                .weather-details {
                    grid-template-columns: 1fr;
                }
            }
            </style>
            <script>
            class WeatherPlugin {
                constructor() {
                    this.apiKey = '0bd483ef3c7bff2f1ab67288d35d6539';
                    this.locations = [
                        { id: 'weather-portaventura', name: 'PortAventura (Salou)', lat: 41.087271, lon: 1.151593 }
                    ];
                    this.baseUrl = 'https://api.openweathermap.org/data/2.5/weather';
                    this.init();
                }
                init() {
                    this.loadWeatherData();
                    setInterval(() => this.loadWeatherData(), 600000);
                }
                async loadWeatherData() {
                    for (const location of this.locations) {
                        try {
                            await this.fetchWeatherData(location);
                        } catch (error) {
                            console.error(`Error loading weather for ${location.name}:`, error);
                            this.displayError(location.id, `Error al cargar datos de ${location.name}`);
                        }
                    }
                    this.updateLastUpdated();
                }
                async fetchWeatherData(location) {
                    const response = await fetch(`${this.baseUrl}?lat=${location.lat}&lon=${location.lon}&appid=${this.apiKey}&units=metric&lang=es`);
                    if (!response.ok) {
                        throw new Error(`Error en la respuesta: ${response.status}`);
                    }
                    const data = await response.json();
                    this.displayWeatherData(location.id, data);
                }
                displayWeatherData(elementId, data) {
                    const element = document.getElementById(elementId);
                    if (!element) return;
                    const weather = data.weather[0];
                    const temp = Math.round(data.main.temp);
                    const humidity = data.main.humidity;
                    const windSpeed = data.wind.speed;
                    const pressure = data.main.pressure;
                    let locationName = 'PortAventura (Salou)';
                    element.innerHTML = `
                        <h4><i class="fas fa-map-marker-alt"></i> ${locationName}</h4>
                        <div class="weather-main">
                            <i class="weather-icon fas fa-cloud"></i>
                            <div class="weather-temp">${temp}°C</div>
                        </div>
                        <div class="weather-condition">${weather.description}</div>
                        <div class="weather-details">
                            <div class="weather-detail">
                                <i class="fas fa-tint"></i>
                                <span>Humedad: ${humidity}%</span>
                            </div>
                            <div class="weather-detail">
                                <i class="fas fa-wind"></i>
                                <span>Viento: ${windSpeed} m/s</span>
                            </div>
                            <div class="weather-detail">
                                <i class="fas fa-thermometer-half"></i>
                                <span>Presión: ${pressure} hPa</span>
                            </div>
                        </div>
                    `;
                }
                displayError(elementId, message) {
                    const element = document.getElementById(elementId);
                    if (!element) return;
                    element.innerHTML = `
                        <div class="error">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>${message}</p>
                        </div>
                    `;
                }
                updateLastUpdated() {
                    const lastUpdatedElement = document.getElementById('last-updated');
                    if (lastUpdatedElement) {
                        const now = new Date();
                        const timeString = now.toLocaleString('es-ES', {
                            day: 'numeric',
                            month: 'long',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        lastUpdatedElement.textContent = `Última actualización: ${timeString}`;
                    }
                }
            }
            document.addEventListener('DOMContentLoaded', function() {
                window.weatherPlugin = new WeatherPlugin();
            });
            </script>
        </div>
    </div>
    
        <!-- Previsión del tiempo y gastos al final de la página -->
        <div style="max-width: 800px; margin: 0 auto;">
            <div class="weather-widget-container">
                <h3>Previsión del tiempo</h3>
                <div id="weather-widget-cannes"></div>
                <div id="weather-widget-salou"></div>
            </div>
            <script src="weather-widget.js"></script>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    initializeWeatherWidget([
                        { id: 'weather-widget-cannes', name: 'Cannes', lat: 43.552847, lon: 7.017369 },
                        { id: 'weather-widget-salou', name: 'Salou', lat: 41.077271, lon: 1.131593 }
                    ]);
                });
            </script>

            <div class="expenses-section" style="background: #f9f9f9; border: 1px solid #ddd; border-radius: 5px; padding: 15px; margin-top: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <h3 style="font-size: 1.5em; margin-bottom: 10px; color: #333;">Gastos</h3>
                <p>En esta ruta, los gastos aproximados por día son los mismos que el día anterior:</p>
                <ul>
                    <li><strong>Peajes (por día):</strong> <span style="color:#4CAF50;">20 €</span> <span style="font-size: 0.9em; color: #888;">(40 € / 2 días)</span></li>
                    <li><strong>Gasolina (por día):</strong> <span style="color:#4CAF50;">40 €</span> <span style="font-size: 0.9em; color: #888;">(80 € / 2 días)</span></li>
                    <li><strong>Comida (por día):</strong> <span style="color:#4CAF50;">100 €</span> <span style="font-size: 0.9em; color: #888;">(200 € / 2 días, para dos adultos y un niño)</span></li>
                    <li><strong>Alojamiento (por noche):</strong> <span style="color:#4CAF50;">298,89 €</span> <span style="font-size: 0.9em; color: #888;">(597,78 € / 2 noches, precio total de la reserva, entradas incluidas)</span></li>
                    <li><strong>Total estimado por día:</strong> <span style="color:#4CAF50; font-weight:bold;">458,89 €</span></li>
                </ul>
                <p style="font-size:0.95em; color:#555; margin-top:1em;">Estos importes son orientativos y pueden variar según el consumo y las actividades realizadas.</p>
            </div>
        </div>

    <footer>
        <div class="navigation-buttons" style="text-align: center; margin-top: 20px;">
            <a href="dia12-Cannes-Salou.html" style="margin-right: 20px; color: #4CAF50; text-decoration: none;">&#8592; Día Anterior</a>
            <a href="dia14-FerrariLand-PortAventura.html" style="margin-right: 20px; color: #4CAF50; text-decoration: none;">Día Siguiente &#8594;</a>
        </div>
        <p style="text-align: center; margin-top: 10px;">&copy; 2025 Mi Viaje por la Selva Negra</p>
    </footer>
</body>
</html>
